#!/usr/bin/env bash

# Find the Gunicorn master process PID
PID=$(ps aux | grep 'gunicorn' | grep 'master' | awk '{print $2}')

# Check if PID was found
if [ -z "$PID" ]; then
    echo "Gunicorn master process not found."
    exit 1
fi

# Send SIGHUP to the Gunicorn master process to gracefully reload
kill -HUP $PID

echo "Sent SIGHUP to Gunicorn master process (PID: $PID) to reload configuration and restart workers gracefully."

